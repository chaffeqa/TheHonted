if(/(http:\/\/www\.google\..+\/.*[?&]q=([^&]+))|(http:\/\/[-a-zA-Z]+\.start3\.mozilla\.com\/search\?.*[?&]q=([^&]+))|(http:\/\/search\.yahoo\.com\/search?.*[?&]p=([^&]+))|(http:\/\/www\.bing\.com\/search?.*[?&]q=([^&]+))/.test(document.location.href)&&!("XmarksSERP" in window)){window.XmarksSERP={REGEX_PATTERN:/(http:\/\/www\.google\..+\/.*[?&]q=([^&]+))|(http:\/\/[-a-zA-Z]+\.start3\.mozilla\.com\/search\?.*[?&]q=([^&]+))|(http:\/\/search\.yahoo\.com\/search?.*[?&]p=([^&]+))|(http:\/\/search\.(msn|live)\.com\/results\.aspx?.*[?&]q=([^&]+))/,STR:{WAITING:"waiting...",NONE:"None",STARS:"Stars",REVIEW:"Review",REVIEWS:"Reviews",NOREVIEWS:"No Reviews",BOOKMARKS:"Bookmarks",XOF5STARSBASEDONYREVIEWS:"%1 of 5 stars, based on %2 %3",XOF5STARS:"%1 of 5 stars",BASEDONYREVIEWS:"based on %1 %2",REVIEWXOFY:"Review %1 of %2",SEEMORE:"See more...",SEEALL:"See all %1 reviews...",RANKSEP:"in",WRITEYOUROWNREVIEW:"Write your own review.",NOREVIEWSYET:"No reviews yet.",BETHEFIRST:"Be the first.",DATEON:"on",REVIEWBY:"by",SHOWADINFO:"Show All Advertiser Info",VERIFIEDSITE:"Verified Site",RANKED:"RANKED"},DOCREV:"$Rev: 19559 $",ABGROUP:"unknown",APIHOST:"api.xmarks.com",SERPNAME:"xmarks.serp",DRIFTHOST:"www.xmarks.com",STATICHOST:"static.xmarks.com",TRHOST:"tr.xmarks.com",SERPPREFS:"",TRNUMHOSTS:2,TRPING:"/tracking/impressions.gif",SERVERURL:"/internal/siteratings?format=jsonp&cid=serp&callback=XmarksSERP.loadData",ADEXTURL:"/internal/shmeardata?cid=serp&format=jsonp&callback=XmarksSERP.loadAdDetail&sid=",DRIFTURL:"/site/",DRIFTREVIEWURL:"/review/edit/",REVIEWANCHOR:"#r",DRIFTTOPICURL:"/topic/",VISITURL:"/internal/visitsite?id=",SHMEARSPRITE:"/SERP/themes/default/schmear-sprite4.png",RATINGSPRITE:"/SERP/themes/default/rating_stars.png",BUBBLESPRITE:"/SERP/themes/default/review-bubble.png",HISTOGRAMSPRITE:"/SERP/themes/default/rating_stars2.png",TOPBARSPRITE:"/SERP/themes/topbar/topbar-sprite.png",TOPBARHEIGHT:"29px",NUM_TO_QUERY:10,MACHINEID:0,MP:true,PID:"xmarks",APPID:"serp",_cacheID:0,SCHMEARCODE:"serp.schmear",ICONCODE:"serp.icon",DEBUG:false,isMac:false,BROWSER:"firefox",_serp_list_obj:{},_serp_list:[],_searchProvider:"google",_getInternetExplorerVersion:function(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c},_log:function(a){if(this.DEBUG&&window.console){window.console.log(a)}},indexOf:function(d,c){if(d.indexOf){return d.indexOf(c)}else{var b=d.length;for(var a=0;a<b;a++){if(d[a]==c){return a}}}return -1},_trParams:function(){return"".concat("&mid=",this.MACHINEID,"&product=",this.PID,"&b=",this.BROWSER,"&sp=",this._searchProvider,"&rev=",encodeURIComponent(this.DOCREV),"&sess=",this.SESSIONID,"&xplat=SearchBoost001:",this.ABGROUP,"&app=",this.APPID)},_getQuery:{google:function(a){if(/http:\/\/www\.google\..+\/.*[?&]q=([^&]+)/.test(a)){var b=document.location.href.match(/[?&]q=([^&]+)(&|$)/);if(b){return b[1].replace(/\+/g,"%20")}}return""},bing:function(a){if(/http:\/\/www\.bing\..+\/.*[?&]q=([^&]+)/.test(a)){var b=document.location.href.match(/q=([^&]+)(&|$)/);if(b){return b[1].replace(/\+/g,"%20")}}return""},yahoo:function(a){return""}},_hasABP:{google:function(){var a=document.getElementById("mbEnd");return a&&a.clientWidth==0},bing:function(){var a=document.getElementById("sidebar");return a&&a.clientWidth==0},yahoo:function(){return false}},_insertTopLocation:{google:function(a,b){a.firstChild.appendChild(b)},bing:function(b,c){var a=b.getElementsByTagName("CITE");if(a.length){var d=a[0];d.parentNode.insertBefore(c,d.nextSibling)}},yahoo:function(a,b){}},_compareLocation:{google:function(){var b=document.getElementById("rhsline");if(b&&b.firstChild&&b.firstChild.tagName=="H2"){return b.firstChild}b=document.getElementById("rhs_block");if(b){var a=b.getElementsByTagName("H2");if(a.length){return a[0]}}return null},bing:function(){var b=document.getElementById("sidebar");var a=function(d,c){return d&&d.tagName==c};if(b&&a(b.firstChild,"DIV")&&a(b.firstChild.firstChild,"H2")){return b.firstChild.firstChild}return null},yahoo:function(){return null}},_shmearLocation:{google:function(d){var e=d.getElementsByTagName("span");var g=XmarksSERP.indexOf;if(e.length>0){var c=e.length;for(var b=0;b<c;b++){var f=e[b];if(g(f.className,"gl")>-1){return f}}}return null},bing:function(b){var d=XmarksSERP.getElementsByClassName("sb_meta",null,b);if(d.length>0){var e=d[0];var c=document.createElement("li");e.appendChild(c);return c}return null},yahoo:function(a){return a}},_buildTopAdResults:{bing:function(){var l=this.getElementsByClassName("sb_adsWv2",null,document);var b=[];if(l.length){var j=l[0];var k=j.getElementsByTagName("ul");if(k.length){j=k[0];var h=j.childNodes;var g=h.length;var d=100;for(var i=0;i<g;i++){var m=h[i];var c=m.getElementsByTagName("cite");if(c.length){var e=c[0];var f=e.textContent||e.innerText;m.setAttribute("xmarks_pos",d++);this.adlinks["http://"+f]=m;b.push(encodeURIComponent("http://"+f));this.numads++}}}}return b},google:function(){var k=document.getElementById("tads");var b=[];if(k){var i=k.getElementsByTagName("a");var h=i.length;var e=100;for(var j=0;j<h;j++){var l=i[j];var d=l.href;var g=/^http:\/\/www.google.com\/(aclk\?|url\?q\=)/;if(g.test(d)){var f=l.parentNode.parentNode;if(f&&f.tagName=="LI"){var c=f.getElementsByTagName("cite");if(c.length){f.setAttribute("xmarks_pos",e++);this.adlinks["http://"+c[0].textContent]=f;b.push(encodeURIComponent("http://"+c[0].textContent))}this.numads++}}}}return b},yahoo:function(){}},_buildRightAdResults:{google:function(){var d="";this.adlinks={};this.numads=0;var i=[];var n=document.getElementById("rhsline")||document.getElementById("rhs_block");var h=/^http:\/\/www.google.com\/(aclk\?|url\?q\=)/;if(n){var l=n.getElementsByTagName("a");var k=l.length;var e=0;for(var m=0;m<k;m++){var o=l[m];var c=o.href;if(h.test(c)){var g=o.parentNode.parentNode;if(g&&g.tagName=="LI"){var b=g.getElementsByTagName("cite");if(b.length){var f=b[0];var j=f.textContent||f.innerText;g.setAttribute("xmarks_pos",e++);this.adlinks["http://"+j]=g;i.push(encodeURIComponent("http://"+j))}this.numads++}}}}return i},bing:function(){var c="";this.adlinks={};this.numads=0;var f=[];var k=document.getElementById("sidebar");var l=k.getElementsByTagName("UL");if(l.length){k=l[0];var i=k.childNodes;var h=i.length;var d=0;for(var j=0;j<h;j++){var m=i[j];var b=m.getElementsByTagName("cite");if(b.length){var e=b[0];var g=e.textContent||e.innerText;m.setAttribute("xmarks_pos",d++);this.adlinks["http://"+g]=m;f.push(encodeURIComponent("http://"+g))}}}return f},yahoo:function(){return[]}},_buildResults:{google:function(){var q=[];var m=document.getElementsByTagName("a");var j=m.length;var f;if(j==0){this._log("No action tags found");return q}var o=this.NUM_TO_QUERY;var k=this._serp_list;var h=this._serp_list_obj;var l=this.indexOf;var g=function(i){var a=i.nextSibling;while(a){if(a.className=="s"||a.tagName=="SPAN"){return true}a=a.nextSibling}return false};var e=function(r,p){if(r.className){var i=r.className.split(" ");return l(i,p)!=-1}return false};for(var f=0;f<j;f++){var n=m[f];var d=n.parentNode;if(d&&e(n,"l")&&e(d,"r")&&g(d)){var b=n.href;if(l(b,"http://www.google.com/url")==0){this._log("Google doing A/B testing: "+b);var c=/[?&]q=([^&]*)/.exec(b);if(c.length>1){b=c[1]}}if(o>0){n.setAttribute("realURL",b);while(n.tagName!="LI"){n=n.parentNode;if(!n){break}}if(b){n.setAttribute("xmarks_pos",k.length);h[b]=n;k.push(n)}q.push(encodeURIComponent(b));o--}else{break}}}this._log("Results found: "+q.length);return q},bing:function(){var n=[];var h=document.getElementsByTagName("a");var e=h.length;var c;if(e==0){this._log("No action tags found");return n}var m=this.NUM_TO_QUERY;var f=this._serp_list;var d=this._serp_list_obj;var g=this.indexOf;var k=function(i,a){return i&&i.tagName==a};var j=function(i,a){return i&&i.className==a};for(var c=0;c<e;c++){var l=h[c];if(k(l.parentNode,"H3")&&j(l.parentNode.parentNode,"sb_tlst")&&j(l.parentNode.parentNode.parentNode,"sa_cc")&&k(l.parentNode.parentNode.parentNode.parentNode,"LI")){var b=l.href;if(m>0){if(b){l.setAttribute("realURL",b);l=l.parentNode.parentNode.parentNode.parentNode;l.setAttribute("xmarks_pos",f.length);d[b]=l;f.push(l);n.push(encodeURIComponent(b));m--}}else{break}}}this._log("Results found: "+n.length);return n},yahoo:function(){var b=[];var c=document.getElementsByTagName("a");var d=c.length;if(d==0){this._log("No results found.");return b}var f=this.NUM_TO_QUERY;while(d--){var e=c[d];if(e.className=="yschttl spt"){this._googlelinks.push(e);b.push(encodeURIComponent(e.href));if(f--==0){break}}}this._log("Yahoo Results found: "+b.length);return b}},_updatePrefs:function(e){var d=e.split(";");var c=d.length;for(var b=0;b<c;b++){var f=d[b].split("=");var g=f[0];var h=f[1];if(f.length){this[g]=h}}},_currHost:0,getTRHost:function(a){return this.TRHOST;if(this.TRHOST=="localhost:8000"){return this.TRHOST}else{this._currHost=(this._currHost+1)%this.TRNUMHOSTS;var b=a?"adtr0":"tr0";return this.TRHOST.replace("tr",b+(this._currHost+1))}return this.TRHOST},calcAppID:function(){var c=document.getElementsByTagName("HEAD");if(c.length){var g=c[0];var b=[];var d=document.getElementsByTagName("SCRIPT");var e=d.length;var k=this.SERPNAME;var f=this.indexOf;for(var i=0;i<e;i++){var j=d[i].src;if(j&&f(j,k)!=-1){var h=j.match(/appid=([^&]+)(&|$)/);if(h){b.push(h[1])}}}if(b.length){this.APPID=b.join(";")}}},monitorQuery:function(){var a=this;var b=document.location.href;window.setInterval(function(){if(b!=document.location.href){var f=document.location.href.match(/q=([^&]+)(&|$)/);var e="";if(f){e=f[1].replace(/\+/g,"%20")}if(e!=a.query){window.setTimeout(function(){a.init()},500)}else{var c=document.location.href.match(/start=([^&]+)(&|$)/);var d=0;if(c){d=parseInt(c[1])}if(this.startNum!=d){window.setTimeout(function(){a.init()},500)}}b=document.location.href}},500);this.monitorQuery=function(){}},init:function(){var c=document.location.href;var i=this.indexOf;this.isMac=navigator.oscpu&&i(navigator.oscpu,"Mac")>-1;this.isWin=(navigator.appVersion.indexOf("Win")!=-1);this.calcAppID();if(i(window.navigator.userAgent.toLowerCase(),"webkit")!=-1){this.BROWSER="chrome"}else{if(this._getInternetExplorerVersion()!=-1){this.BROWSER="ie"}}this._serp_list_obj={};this._serp_list=[];var k=document.getElementById("foxmarks.prefs");if(k){this._updatePrefs(k.value)}if(i(c,"search.yahoo.com")>0){this._searchProvider="yahoo"}else{if(i(c,"www.bing.com")>0){this._searchProvider="bing"}}var g=new Date();this.SESSIONID=g.getTime().toString(36);this.query=this._getQuery[this._searchProvider](c);this.AJAXY=/http:\/\/www\.google\..+\/#/.test(c);if(this.AJAXY){var j=document.location.href.match(/start=([^&]+)(&|$)/);if(j){this.startNum=parseInt(j[1])}else{this.startNum=0}this.monitorQuery()}var b=this._buildResults[this._searchProvider].apply(this);var e=this._buildRightAdResults[this._searchProvider].apply(this);var a=this._buildTopAdResults[this._searchProvider].apply(this);var d="";if(e.length){d="&adurl="+e.join("&adurl=")}if(a.length){d=d+"&topadurl="+a.join("&topadurl=")}var h=document.createElement("script");h.setAttribute("src","http://".concat(this.APIHOST,this.SERVERURL,"&query=",this.query,this._trParams(),"&sid=",this.SESSIONID,"&url=",b.join("&url="),d));document.body.appendChild(h);var f=new Image();f.src="".concat("http://",this.getTRHost(),this.TRPING,"?page=serp.impression.sb",this._trParams())},_eraseCookie:function(c){var b=new Date();b.setTime(b.getTime()+(-24*60*60*1000));var a="; expires="+b.toGMTString();document.cookie=c+"="+a+"; path=/"},_setCookie:function(d,e,b){var a="";if(!b){var c=new Date();c.setTime(c.getTime()+(10*365*24*60*60*1000));a="; expires="+c.toGMTString()}document.cookie=d+"="+e+a+"; path=/"},_getCookie:function(b,f){var g=b+"=";var a=document.cookie.split(";");var e=this.indexOf;for(var d=0;d<a.length;d++){var h=a[d];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(e(h,g)==0){return h.substring(g.length,h.length)}}return f},_eventList:{_list:{},_eventID:function(b,a){return b.id+a},add:function(d,b,a){var c=this._eventID(d,b);this._list[c]=d.addEventListener?a:function(){var e=window.event;e.target=e.srcElement;a(e)};return this._list[c]},del:function(c,b){var a=this._list[this._eventID(c,b)];delete this._list[this._eventID(c,b)];return a}},_stopEvent:function(a){a.cancelBubble=true;a.returnValue=false;if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}},_attachEvent:function(d,c,b,a){if(d.addEventListener){d.addEventListener(c,this._eventList.add(d,c,b),a)}else{d.attachEvent("on"+c,this._eventList.add(d,c,b))}},_detachEvent:function(b,a){if(b.removeEventListener){b.removeEventListener(a,this._eventList.del(b,a),false)}else{b.detachEvent("on"+a,this._eventList.del(b,a))}},getElementsByClassName:function(c,D,d){if(document.getElementsByClassName){d=d||document;var p=d.getElementsByClassName(c),a=(D)?new RegExp("\\b"+D+"\\b","i"):null,o=[],q;for(var w=0,h=p.length;w<h;w+=1){q=p[w];if(!a||a.test(q.nodeName)){o.push(q)}}return o}else{if(document.evaluate){D=D||"*";d=d||document;var B=c.split(" "),C="",z="http://www.w3.org/1999/xhtml",f=(document.documentElement.namespaceURI===z)?z:null,o=[],p,s;for(var v=0,x=B.length;v<x;v+=1){C+="[contains(concat(' ', @class, ' '), ' "+B[v]+" ')]"}try{p=document.evaluate(".//"+D+C,d,f,0,null)}catch(A){p=document.evaluate(".//"+D+C,d,null,0,null)}while((s=p.iterateNext())){o.push(s)}return o}else{D=D||"*";d=d||document;var B=c.split(" "),C=[],p=(D==="*"&&d.all)?d.all:d.getElementsByTagName(D),q,o=[],g;for(var u=0,b=B.length;u<b;u+=1){C.push(new RegExp("(^|\\s)"+B[u]+"(\\s|$)"))}for(var t=0,n=p.length;t<n;t+=1){q=p[t];g=false;for(var r=0,y=C.length;r<y;r+=1){g=C[r].test(q.className);if(!g){break}}if(g){o.push(q)}}return o}}},_cleanURL:function(a){return a.replace(/http:\/\//,"")},_truncText:function(b,a){if(b.length>a){return b.substring(0,a)+"..."}else{return b}},_cleanForDrift:function(a){return encodeURIComponent(a)},decorateRating:function(s,m,f,d,c,b){if(!m.numreviews){return null}var k=this.BROWSER=="chrome";var a=this.BROWSER=="ie";var l=this._searchProvider=="bing";var h="right";if((typeof c!="string")&&c>=100){c=c-100;h="top"}var t;t=document.createElement("div");var n=m.rating;var p=Math.round(n*2);var g=p*16;var i=false;if(d){i=this.ABGROUP=="T2"}t.href="http://"+this.DRIFTHOST+this.DRIFTURL+"?url="+this._cleanForDrift(f)+"&sid="+this.SESSIONID+"&product="+this.PID+"&cid=searchtabs.rating&mid="+this.MACHINEID+"#r";t.className="xmarks-rating";var j=Math.round(m.rating*2)/2;var v=this.STR.XOF5STARSBASEDONYREVIEWS.replace("%1",j).replace("%2",m.numreviews).replace("%3",m.numreviews==1?this.STR.REVIEW:this.STR.REVIEWS);t.title=v;t.appendChild(document.createTextNode(" "));if(k){t.innerHTML="&nbsp;"}var q=l?"line-height: 28px;":"";var e=(a&&l&&h=="right")?"display: block; margin-top: 6px;":"display: inline;";t.style.cssText="background: transparent url('http://"+this.STATICHOST+this.RATINGSPRITE+"') 0px -"+g+"px no-repeat;margin-left: 6px; position: relative; height: 16px;"+(d?"margin-bottom: 0px;"+q:"margin-top: 2px;cursor: pointer;")+(i?"display: none;":(e+"padding: 0px 40px; font-size: 14px;"));var u=d?"&domain=":"&url=";this.addMegaPing("".concat("&page=serp.rating.",(d?"ads":"results"),"&ordinal=",c,"&block=",h,"&rating=",m.rating,u,encodeURIComponent(f)));s.appendChild(t);return t},buildShmear:function(h,g,v,d,e,o,c,j){var s=[];var r=c!==undefined;var l=false;var n=this.BROWSER=="chrome";var b=this.BROWSER=="ie";var p=this.BROWSER=="firefox";var i=this.isWin;var k="right";var h=h||{topic:"",rank:0,display:this.STR.VERIFIEDSITE};if((typeof e!="string")&&e>=100){k="top";e=e-100}if(g){s.push("<span ");l=d=="T2"}else{s.push("<a ");s.push('href="http://',this.DRIFTHOST,this.DRIFTTOPICURL,encodeURIComponent(h.topic),"?sid=",this.SESSIONID,"&product=",this.PID,"&featured=",v,"&xplat=SearchBoost001:",this.ABGROUP,"&cid=serp.shmear.rating","&mid=",this.MACHINEID,'" ')}s.push('style="',"font-size: 11px;","line-height: "+this.TOPBARHEIGHT,"padding: 3px;","text-decoration: none;","display: ",l?"none;":"inline;","white-space: nowrap;",(b?"margin-left: 6px;":""));s.push('" ');s.push('class="xmarks-shmear"');s.push(">");var u=g?"&domain=":"&url=";this.addMegaPing("".concat("&page=serp.shmear.",(g?"ads":"results"),"&shmearname=",encodeURIComponent(h.topic),".",encodeURIComponent(this.query),"&rank=",h.rank,"&ordinal=",e,"&block=",k,"&rating=",o,u,encodeURIComponent(j)));var m;var t;var q=k=="top"?"5px;":"3px;";var a=h.rank<10;if(g){if(p&&i){t="2px 10px 3px 6px;"}else{t="3px 10px 3px 6px;"}if(h.rank>0){m="transparent  url('http://"+this.STATICHOST+this.SHMEARSPRITE+"') "+(a?"-30px":"-152px")+" 0px no-repeat;"}else{m="transparent  url('http://"+this.STATICHOST+this.SHMEARSPRITE+"') 0px 0px no-repeat;"}}else{if(p&&i){t="2px 10px 3px 6px;"}else{t="3px 10px 3px 6px;"}if(h.rank>0){m="transparent  url('http://"+this.STATICHOST+this.SHMEARSPRITE+"') "+(a?"-88px":"-222px")+" 0px no-repeat;"}else{m="transparent  url('http://"+this.STATICHOST+this.SHMEARSPRITE+"') -58px 0px no-repeat;"}}var f="";if(n){f="top: 1px;"}else{if(b){f="top: 1px;"}}s.push("<span ");s.push('style="',"position: relative;","background: ",m,f,"color: white;","font-size: 11px;","padding: ",t,"text-decoration: none;");s.push('">');if(h.rank>0){s.push("#",h.rank)}else{s.push("&nbsp;&nbsp;&nbsp;&nbsp;")}s.push("</span>");s.push("<span ");s.push('style="',"background: transparent url('http://",this.STATICHOST,this.SHMEARSPRITE,"') ","-260px 2px no-repeat;",g?"color: black;":"color: #005F9F;","font-size: 10px;","margin-left: -1px;","font-weight: bold;","padding: 5px 2px 3px;","position: relative;","top: 0px;","text-decoration: none;");s.push('">');if(h.rank>0){s.push(" "+this.STR.RANKSEP+" ")}s.push('<span style="text-decoration: ',g?"none":"underline;",'">',h.display,"</span>");s.push("</span>");s.push("<span ");s.push('style="',"background: transparent url('http://",this.STATICHOST,this.SHMEARSPRITE,"') ","-573px 2px no-repeat;","padding: 4px 8px 4px;","font-size: 10px;","position: relative;","top: -1px;","text-decoration: none;");s.push('">');s.push("&nbsp;</span>");if(g){s.push("</span>")}else{s.push("</a>")}return s},addRatingListeners:function(f,e,c){var a=null;var b=this;var d=function(){var m=document.getElementById("foxmarks.adinfo");if(m&&m.parentNode){var k=m.parentNode;var l=m.getAttribute("is_organic")=="1";var h=m.getAttribute("is_topad")=="1";if(!l){var j=b.getElementsByClassName("xmarks-ad-shmear",null,k);if(j.length){j[0].style.display=h?"inline":"block"}j=b.getElementsByClassName("xmarks-rating",null,k);if(j.length){j[0].style.display="inline"}}else{if(b.BROWSER=="ie"){var i=m;do{i=i.parentNode;i.style.zIndex=""}while(i&&i.getAttribute&&i.getAttribute("xmarks_pos")===null)}}k.removeChild(m)}a=null};var g=function(n){if(a){if(n.target!=closebox){var m=n.target;while(m){if(m==a){return}m=m.parentNode}}b._stopEvent(n);d();f.style.cursor="pointer"}else{b._stopEvent(n);d();a=document.createElement("div");a.id="foxmarks.adinfo";a.setAttribute("is_organic",e?"1":"0");a.setAttribute("is_topad",c?"1":"0");a.setAttribute("rating",f.getAttribute("xmarksrating"));a.setAttribute("numreviews",f.getAttribute("xmarksnumreviews"));a.setAttribute("xmarksurl",f.getAttribute("xmarksurl"));a.style.cssText="".concat("position: ",(e?"absolute;":"relative;"),"top: ",(e?"0px; ":"8px;"),"left: 0px;","font-size: 12px;","color: black;","z-index: 220;","width: ",((e||c)?"216px;":"216px;"),"max-width: ",((e||c)?"216px;":"216px;"),"background-color: white;","padding: 0px;","opacity: 1.0;");closebox=document.createElement("div");closebox.style.cssText="".concat("position: absolute;","right: 6px;","top: 8px;","width: 15px;","z-index: 300;","border: none;","cursor: pointer;","background: transparent url('http://",b.STATICHOST,b.BUBBLESPRITE,"') -1px -1px no-repeat;","height: 15px;");b._attachEvent(closebox,"mouseover",function(){closebox.style.backgroundPosition="-1px -16px"},false);b._attachEvent(closebox,"mouseout",function(){closebox.style.backgroundPosition="-1px -1px"},false);b._attachEvent(closebox,"click",g,false);a.appendChild(closebox);if(e){f.parentNode.style.position="relative";f.parentNode.appendChild(a);if(b.BROWSER=="ie"){var j=f;var o=222;do{j=j.parentNode;j.style.zIndex=o;j.style.position="relative";o++}while(j&&j.getAttribute&&j.getAttribute("xmarks_pos")===null)}}else{var l=f.parentNode;var k=l.parentNode;var i=b.getElementsByClassName("xmarks-ad-shmear",null,k);k.appendChild(a);if(i.length){i[0].style.display="none"}i=b.getElementsByClassName("xmarks-rating",null,k);if(i.length){i[0].style.display="none"}f.style.cursor=""}var h=document.createElement("script");h.setAttribute("src","http://".concat(b.APIHOST,b.ADEXTURL,b.SESSIONID,"&rev=",encodeURIComponent(b.DOCREV),"&sess=",b.SESSIONID,"&mid=",b.MACHINEID,"&product=",b.PID,"&id=",f.getAttribute("xmarksID")));document.body.appendChild(h)}};f.style.cursor="pointer";b._attachEvent(f,"click",g,false)},loadAdDetail:function(v){var p=document.getElementById("foxmarks.adinfo");if(p){var g=p;var l=this;var f=p.getAttribute("is_organic")=="1";var h=p.getAttribute("is_topad")=="1";function s(x,A){var B=document.createElement("p");var z="http://"+l.DRIFTHOST+l.DRIFTREVIEWURL+"?url="+p.getAttribute("xmarksurl")+"&sid="+l.SESSIONID+"&product="+l.PID+"&cid=search.ratingbubble&mid="+l.MACHINEID;B.innerHTML=x+"  <a href='"+z+">"+A+"</a>";B.style.fontSize="12px";B.style.color="#4c4c4c";return B}function o(A,C){var z;z=document.createElement("span");var B=A;var E;if(C){switch(A){case 1:E=22;break;case 2:E=43;break;case 3:E=65;break;case 4:E=86;break;case 5:E=108;break}}else{var D=Math.round(B*2);E=D*16}var x=false;z.className="xmarks-rating";z.appendChild(document.createTextNode(" "));z.style.cssText="background: transparent url('http://"+l.STATICHOST+(C?l.HISTOGRAMSPRITE:l.RATINGSPRITE)+"') 0px -"+E+"px no-repeat;width: "+(C?"60px;":"80px;")+"height: "+(C?"11px;":"16px;")+"position: relative;display: inline-block; margin-left: 6px;";return z}function b(z,A,x){l._attachEvent(z,"click",function(){z.parentNode.removeChild(z);A.innerHTML=x},false)}function w(E,H){var I=v.review_data;var A;var x=document.createElement("div");x.style.cssText="".concat("padding-top: 8px;",H?"border-bottom: 1px dotted #666;":"");if(E>=I.length){x.appendChild(s("",l.STR.WRITEYOUROWNREVIEW));x.style.borderBottom="none"}else{var K=I[E];var C=o(K.rating);x.appendChild(C);var z=document.createElement("p");z.style.cssText="".concat("padding: 4px;","margin: 2px;","color: #4C4C4C;","font-size: 12px;","text-align: left;","white-space: normal;","width: 188px;");var D=K.body;var B=140;if(D.length>B){D=D.substring(0,B)+"...  "}z.appendChild(document.createTextNode(D));if(D.length!=K.body.length){var J=document.createElement("span");J.style.cssText="".concat("text-decoration: underline;","color: blue;","font-size: 9px;","font-style: italic;","cursor: pointer");J.appendChild(document.createTextNode(l.STR.SEEMORE));b(J,z,K.body);z.appendChild(J)}x.appendChild(z);var z=document.createElement("p");z.appendChild(document.createTextNode(l.STR.REVIEWBY+" "));var G=document.createElement("a");G.href="http://"+l.DRIFTHOST+"/profile/"+encodeURIComponent(K.username);G.style.cssText="color: blue;";G.appendChild(document.createTextNode(K.username));z.appendChild(G);z.style.cssText="".concat("text-align: left;","font-size: 10px;","color: #808080;","margin: 2px;","font-style: italic;");x.appendChild(z);var z=document.createElement("p");var F=new Date(K.modified*1000);z.style.cssText="".concat("text-align: left;","font-size: 10px;","margin: 2px;","color: #808080;","font-style: italic;");z.appendChild(document.createTextNode(l.STR.DATEON+" "+F.toLocaleDateString()));x.appendChild(z)}return x}function j(D,A){var z=document.createElement("div");z.style.cssText="".concat("border-left: 1px solid #dadada;","padding: 10px 4px 4px 18px;","border-right: 1px solid #dadada;");var E=0;for(var G=1;G<=5;G++){var C=D[G.toString()];if(C){E+=C}}for(var G=5;G>=1;G--){var K,H;var C=D[G.toString()];var B=f||h?125:125;K=document.createElement("div");K.style.cssText="".concat("height: 16px;","position: relative;");H=document.createElement("span");H.style.cssText="".concat("position: relative;","top: -2px;","margin-right: 6px;","font-size: 10px;");H.appendChild(document.createTextNode(G+" "+l.STR.STARS));K.appendChild(H);var J=document.createElement("div");J.style.cssText="".concat("position: absolute;","left: 40px;","top: 0px;","height: 14px;","overflow: hidden;","background: transparent url('http://",l.STATICHOST,l.BUBBLESPRITE,"') -0px -284px no-repeat;","width: ",B,"px;");H=document.createElement("div");H.style.cssText="".concat("padding: 0px;","width: ",B-15,"px;","height: 13px;","position: absolute;","left: 14px;","top: 0px;","margin: 0px;","background: transparent url('http://",l.STATICHOST,l.BUBBLESPRITE,"') 0px -271px repeat-x;");J.appendChild(H);H=document.createElement("div");H.style.cssText="".concat("padding: 0px;","width: 3px;","height: 13px;","position: absolute;","right: 0px;","margin: 0px;","background: transparent url('http://",l.STATICHOST,l.BUBBLESPRITE,"') -13px -258px no-repeat;");J.appendChild(H);if(C){var F=C*B/E;var I=document.createElement("div");I.style.cssText="".concat("height: 14px;","width: ",F,"px;","background: transparent url('http://",l.STATICHOST,l.BUBBLESPRITE,"') -1px -219px no-repeat;");H=document.createElement("div");H.style.cssText="".concat("padding: 0px;","width: ",F-16,"px;","height: 13px;","position: absolute;","left: 14px;","top: 0px;","margin: 0px;","background: transparent url('http://",l.STATICHOST,l.BUBBLESPRITE,"') 0px -232px repeat-x;");I.appendChild(H);H=document.createElement("div");H.style.cssText="".concat("padding: 0px;","width: 2px;","height: 13px;","position: absolute;","left: ",F-2,"px;","margin: 0px;","background: transparent url('http://",l.STATICHOST,l.BUBBLESPRITE,"') -7px -245px no-repeat;");I.appendChild(H);J.appendChild(I)}K.appendChild(J);H=document.createElement("span");H.style.cssText="".concat("margin-left: 6px;","position: absolute;","right: 8px;","top: -2px;","font-size: 10px;");H.appendChild(document.createTextNode("("+(C||0)+")"));K.appendChild(H);z.appendChild(K)}var H=document.createElement("div");H.style.cssText="".concat("position: relative;","height: 2px;","margin: 4px 14px 4px 4px;","border-bottom: 2px solid #dadada;");z.appendChild(H);A.appendChild(z)}var u=document.createElement("div");var d=l.BROWSER=="chrome";u.style.cssText="".concat("height: 32px;","width: 100%;","z-index: 223;","position: relative;","overflow: hidden;","background: white url('http://",this.STATICHOST,this.BUBBLESPRITE,"') -1px -48px no-repeat;");var y=document.createElement("h4");var n=this.STR.XOF5STARS.replace("%1",g.getAttribute("rating"));var k=g.getAttribute("numreviews");var t=this.STR.BASEDONYREVIEWS.replace("%1",k).replace("%2",k=="1"?this.STR.REVIEW:this.STR.REVIEWS);y.style.cssText="".concat("margin: 0px 14px;","color: #666;","font-size: 11px;","padding: 4px 4px 16px 4px;","background: white url('http://",this.STATICHOST,this.BUBBLESPRITE,"') 0px -81px repeat-x;");y.appendChild(document.createTextNode(n));u.appendChild(y);y=document.createElement("p");y.style.cssText="".concat("margin: 0px 14px;","color: #666;","font-size: 9px;","position: absolute;","top: 16px;","left: 4px;","background-color: transparent;");y.appendChild(document.createTextNode(t));u.appendChild(y);var i=document.createElement("div");i.style.cssText="".concat("position: absolute;","right: -1px;","top: 0px;","height: 32px;","width: 16px;","background: white url('http://",this.STATICHOST,this.BUBBLESPRITE,"') 0px -114px no-repeat;");u.appendChild(i);var c=false;g.appendChild(u);if(v.histogram){j(v.histogram,g)}var i=document.createElement("div");i.id="xmarks.rating.body";i.style.cssText="".concat("border-left: 1px solid #dadada;","padding: 4px;","border-right: 1px solid #dadada;","position: relative;","text-align: left;");if(v.review_data&&v.review_data.length){var r=Math.min(v.review_data.length,3);for(var e=0;e<r;e++){var a=w(e,e!=r-1);i.appendChild(a)}c=r<v.review_data.length}else{i.appendChild(s(l.STR.NOREVIEWSYET,l.STR.WRITEYOUROWNREVIEW))}g.appendChild(i);i=document.createElement("div");i.style.cssText="".concat("height: 24px;","position: relative;","background: transparent url('http://",this.STATICHOST,this.BUBBLESPRITE,"') -1px -147px no-repeat;");var q=document.createElement("div");q.style.cssText="".concat("margin: 0px 14px;","height: 24px;","background: transparent url('http://",this.STATICHOST,this.BUBBLESPRITE,"') 0px -171px repeat-x;");i.appendChild(q);q=document.createElement("div");q.style.cssText="".concat("margin: 0px;","height: 24px;","width: 16px;","position: absolute;","top: 0px;","right: -1px;","background: transparent url('http://",this.STATICHOST,this.BUBBLESPRITE,"') 0px -195px no-repeat;");i.appendChild(q);if(c){var m=document.createElement("div");m.style.cssText="".concat("position: absolute;","top: 4px;","left: 12px;","background-color: transparent;");q=document.createElement("span");q.appendChild(document.createTextNode("Â»"));q.style.cssText="".concat("font-size: 14px;","color: #fbb03b;","font-weight: bold;");m.appendChild(q);q=document.createElement("a");q.href="http://"+l.DRIFTHOST+l.DRIFTURL+"?url="+p.getAttribute("xmarksurl")+"&sid="+l.SESSIONID+"&product="+l.PID+"&cid=serp.ratingbubble&mid="+l.MACHINEID+"#r";q.style.cssText="".concat("font-size: 10px;","margin-left: 4px;","color: blue;");q.appendChild(document.createTextNode(l.STR.SEEALL.replace("%1",k)));m.appendChild(q);i.appendChild(m)}g.appendChild(i)}},loadAdData:function(y,d){var w=0;var n=0;if(y.status==0){var q=y.data;for(var g in q){if(q.hasOwnProperty(g)){var t=q[g];var s=null;var p=this.adlinks[g];var e=parseInt(p.getAttribute("xmarks_pos"))||"None";var a=e>=100?e-100:e;var h=e>=100?"top":"right";if(t.shmear||t.boost){var r=[];var m="None";if(t.rating){m=t.rating.rating}r=this.buildShmear(t.shmear,true,t.url_id,d,e,m,t.boost,g);var o=document.createElement("div");s=document.createElement("span");s.setAttribute("style","display: inline-block; padding-top: 4px; padding-left: ".concat(".25","em;"));s.innerHTML=r.join("");s.setAttribute("xmarksID",t.url_id);s.setAttribute("xmarksurl",encodeURIComponent(g));o.appendChild(s);o.className="xmarks-ad-shmear";if(!t.boost||this.ABGROUP=="T0"){o.style.display="none"}if(h=="top"){if(t.boost&&this.ABGROUP!="T0"){o.style.display="inline"}o.style.position="relative";o.style.marginLeft="20px";o.style.left="6px";o.style.top="-4px";if(this._searchProvider=="bing"){o.style.top="-2px"}this._insertTopLocation[this._searchProvider](p,o)}else{o.style.position="relative";p.appendChild(o);if(this._searchProvider=="bing"){o.style.top="-12px"}}n++}var u=[];if(t.boost){var c=t.boost;var u=[];for(var l in c){if(c.hasOwnProperty(l)){u.push("&",l,"=",c[l])}}u.push("&ordinal=",a);u.push("&block=",h);p.setAttribute("xmarks_boost",u.join(""))}if(t.rating){if(s){p=s.parentNode}else{p=this.adlinks[g]}var b=this.decorateRating(p,t.rating,g,true,e,t.boost);if(b){b.setAttribute("xmarksID",t.url_id);b.setAttribute("xmarksurl",encodeURIComponent(g));var j=Math.round(t.rating.rating*2)/2;b.setAttribute("xmarksrating",j);b.setAttribute("xmarksnumreviews",t.rating.numreviews);this.addRatingListeners(b,false,h=="top");if(!t.boost||this.ABGROUP=="T0"){b.style.display="none"}}w++}if(t.rating||t.shmear){if(u.length>0){this.addMegaPing("".concat("&page=serp.ads.boost.impression",u.join("")))}}}}}var f=this._compareLocation[this._searchProvider]();if(this.ABGROUP!="T2"&&f){f.appendChild(document.createTextNode(" ("));var k=document.createElement("a");k.href="#";k.appendChild(document.createTextNode(this.STR.SHOWADINFO));k.style.cssText="".concat("font-size: 10px;","color: blue;","text-decoration: underline;");f.appendChild(k);this.addCompareAdsListener(k);f.appendChild(document.createTextNode(")"))}var i=this._hasABP[this._searchProvider]();var v="none";if(!i){if(this.numads){if(n>0||w>0){v="decorated"}else{v="nonedecorated"}}}this.addMegaPing("".concat("&page=serp.displayads.",v,"&has_apb=",i?"1":"0","&ratings=",w,"&shmear=",n,"&ads=",this.numads))},addCompareAdsListener:function(e){var b=e.parentNode.parentNode;var g=document.getElementById("tads");var d=this;var c=this.BROWSER=="ie";var a=this._searchProvider=="bing";function f(n){var k=e.getAttribute("xmarks-adstate")=="1";d._stopEvent(n);var j=document.getElementById("foxmarks.adinfo");if(j){j.parentNode.removeChild(j)}var m=(c&&a)?"":"inline";var i=d.getElementsByClassName("xmarks-rating",null,b);for(var h=0;h<i.length;h++){i[h].style.display=k?"none":m}i=d.getElementsByClassName("xmarks-ad-shmear",null,b);for(var h=0;h<i.length;h++){i[h].style.display=k?"none":"block"}if(g){var i=d.getElementsByClassName("xmarks-rating",null,g);var o=0;for(var h=0;h<i.length;h++){var l=i[h].style;l.display=k?"none":"inline-block";o++}i=d.getElementsByClassName("xmarks-ad-shmear",null,g);for(var h=0;h<i.length;h++){i[h].style.display=k?"none":"inline";o++}}e.setAttribute("xmarks-adstate",k?"0":"1");e.style.color="#666";e.style.textDecoration="none";e.blur();d._detachEvent(e,"click")}e.setAttribute("xmarks-adstate","0");this._attachEvent(e,"click",f,false)},loadData:function(w){if(w.status==0){var h=this._serp_list_obj;this.ABGROUP=w.ABGroup;this.MP=w.MP;var v=this._shmearLocation[this._searchProvider];if(w.results&&w.results.status==0){var p=w.results.data;for(var g in p){if(p.hasOwnProperty(g)){var t=p[g];var m=h[g];var d=parseInt(m.getAttribute("xmarks_pos"));var n=t.boost!==undefined;if(t.boost){var c=t.boost;var u=[];for(var l in c){if(c.hasOwnProperty(l)){u.push("&",l,"=",c[l])}}m.setAttribute("xmarks_boost",u.join(""));if(u.length>0){this.addMegaPing("".concat("&xplat=SearchBoost001:",this.ABGROUP,"&ordinal=",d,"&page=serp.org.boost.impression",u.join("")))}}if(t.shmear){var q=[];q=this.buildShmear(t.shmear,false,t.url_id,w.ABGroup,"None","None",c,g);var r=document.createElement("span");r.innerHTML=q.join("");var k=v(m);if(k){var i=!!k.getElementsByTagName("button").length;if(i){var f="display: inline-block; padding-top: 4px; padding-left: 8px; position: relative;";r.setAttribute("style",f)}else{var f="display: inline-block; padding-top: 4px; padding-left: 6px; position: relative;";r.setAttribute("style",f)}k.appendChild(r)}}if(t.rating){var k=v(m);if(k){var b=this.decorateRating(k,t.rating,g,false,"None",t.boost);if(b){b.setAttribute("xmarksID",t.url_id);b.setAttribute("xmarksurl",encodeURIComponent(g));var j=Math.round(t.rating.rating*2)/2;b.setAttribute("xmarksrating",j);b.setAttribute("xmarksnumreviews",t.rating.numreviews);this.addRatingListeners(b,true)}}}if(t.offer){if(this.getElementsByClassName("xmarks-offer",null,m).length==0){var a=t.offer;var r=document.createElement("a");var z=document.createElement("img");z.src="http://".concat(this.STATICHOST,"/SERP/offer_arrow.png");z.setAttribute("style","".concat("border: none;","position: absolute;","top: 3px;","right: -1px;","width: 14px;","margin-right: 4px;","height: 12px;"));r.setAttribute("class","xmarks-offer");r.appendChild(document.createTextNode(a.display_text));r.appendChild(z);r.setAttribute("style","".concat("padding: 2px 22px 3px 6px;","position: relative;","top: -3px;","margin-left: 8px;","text-decoration: none;","font-weight: bold;","font-size: 10px;","cursor: pointer;","background-color: #009900;","-moz-border-radius: 6px;","border-radius: 6px;","color: white;"));r.href=a.display_link;var y=m.getElementsByTagName("h3");var k=m;if(y.length>0){k=y[0]}this.attachOfferHandler(r,a);this.addMegaPing("".concat("&displaytext=",encodeURIComponent(a.display_text),"&page=serp.offer.results","&linkid=",a.id));k.appendChild(r)}}}}}if(w.ads&&w.ads.status==0){this.loadAdData(w.ads,w.ABGroup)}this.addOrganicHandler();this.addHandlers();this.sendMegaPing();try{var o=document.createEvent("Event");if(o){window.XmarksData=w;o.initEvent("xmarksload",true,false);document.body.dispatchEvent(o)}}catch(s){}}},_addOrgListener:function(p){var m=this.getElementsByClassName("xmarks-offer",null,p).length>0;var o=p.getAttribute("xmarks_boost");var j=this.getElementsByClassName("xmarks-shmear",null,p).length>0;var k=this.getElementsByClassName("xmarks-rating",null,p).length>0;var d=parseInt(p.getAttribute("xmarks_pos"));var b=d>=100?d-100:d;var g=d>=100?"top":"right";var l=this;var f;var c="";if(o){c=p.getAttribute("xmarks_boost");f="serp.org.boost.click"+c}else{f="serp.org.click"}if(p.firstChild&&p.firstChild.tagName=="H3"){var t=this.getElementsByClassName("l",null,p.firstChild);if(t.length){var e=t[0].getAttribute("realurl");var s=function(a){l._attachEvent(a,"mousedown",function(u){var i=new Image;i.src="".concat("http://",l.getTRHost(o),l.TRPING,"?url=",encodeURIComponent(e),l._trParams(),"&pos=",b,"&block=",g,"&has_offer=",m?"1":"0","&has_boost=",o?"1":"0","&has_rating=",k?"1":"0","&has_shmear=",j?"1":"0","&page=",f)},false)};s(t[0]);t=p.getElementsByTagName("A");var r=t.length;for(var h=0;h<r;h++){var q=t[h];if(q.className=="fl"){continue}else{if(q.parentNode.className=="osl"){s(q)}else{if(q.parentNode.parentNode.tagName=="TD"){var n=q.parentNode.parentNode;while(n&&n.tagName!="TABLE"){n=n.parentNode}if(n&&n.className=="slk"){s(q)}}}}}}}},addOrganicHandler:function(){var d=this._serp_list;var c=d.length;for(var b=0;b<c;b++){var a=d[b];this._addOrgListener(a)}},_soAd:null,attachOfferHandler:function(d,e){var a=this;var c=function(g){a._stopEvent(g);window.location.href="http://wiki.foxmarks.com/wiki/XmarksSpecialOffers"};var f=function(g){document.body.removeEventListener("click",f,false);if(a._soAd){a._soAd.parentNode.removeChild(a._soAd);a._soAd=null}};var b=function(l){var j=null;var i=l.target.className=="xmarks-offer"?l.target:l.target.parentNode;if(a._soAd){j=a._soAd.parentNode;if(i.className=="xmarks-offer"&&i!=j){a._stopEvent(l)}f();return}if(i.className!="xmarks-offer"){a._stopEvent(l);return}d.blur();a._stopEvent(l);a._soAd=document.createElement("div");a._soAd.setAttribute("style","".concat("position: absolute;","z-index: 200;","top: 0px;","min-width: 120px;","left: ",d.offsetWidth+6,"px;","padding: 18px 4px 14px;","-moz-border-radius: 6px;","border-radius: 6px;","-moz-box-shadow: #333 5px 5px 5px;","-webkit-box-shadow: #333 5px 5px 5px;","background-color: white;","border: 1px solid #333;","font-weight: normal;","font-size: 10px;","color: black;"));a.attachOfferClickTracker(a._soAd,e);a._soAd.innerHTML=e.html.replace(/&lt;/g,"<").replace(/&gt;/g,">");var k=document.createElement("img");k.src="http://"+a.STATICHOST+"/SERP/offer_info.png";k.setAttribute("style","".concat("position: absolute;","bottom: 4px;","border: none;","cursor: pointer;","right: 4px;"));a._attachEvent(k,"click",c,false);a._soAd.appendChild(k);var h=new Image();h.src="".concat("http://",a.getTRHost(),a.TRPING,"?linkid=",e.id,a._trParams(),"&displaytext=",encodeURIComponent(e.display_text),"&page=serp.offer.preview","&linkid=",e.id);var g=document.createElement("img");g.src="http://"+a.STATICHOST+"/SERP/bubble_close.png";g.setAttribute("style","".concat("position: absolute;","right: 4px;","top: 2px;","width: 12px;","border: none;","cursor: pointer;","height: 12px;"));a._attachEvent(g,"click",f,false);a._soAd.appendChild(g);d.appendChild(a._soAd);a._attachEvent(document.body,"click",f,false)};a._attachEvent(d,"click",b,false)},attachOfferClickTracker:function(d,c){var a=this;function b(h){var g=h.target;while(g&&g.tagName!="A"){if(g==d){return}g=g.parentNode}var f=new Image();f.src="http://".concat(a.getTRHost(),a.TRPING,"?page=serp.offer.click",a._trParams(),"&displaytext=",encodeURIComponent(c.display_text),"&linkid=",c.id)}a._attachEvent(d,"mousedown",b,false)},addHandlers:function(){var d=this.adlinks;var c=this;for(var b in d){if(d.hasOwnProperty(b)){var a=d[b];c._attachEvent(a,"mousedown",function(q){var i=q.target;while(i.tagName!="A"&&i!=a){i=i.parentNode;if(!i){return}}if(i.tagName!="A"){return}if(i.className=="xmarks-sai"){return}var h=i.getAttribute("href");var k=i.parentNode.parentNode;var u="unknown";var t="unknown";var j="unknown";var r="unknown";var m="unknown";var o="unknown";var l="right";var g=false;var p="";if(k){u=c.getElementsByClassName("xmarks-rating",null,k).length>0;t=c.getElementsByClassName("xmarks-shmear",null,k).length>0;j=c.getElementsByClassName("xmarks-shmear",null,k.parentNode).length>0;r=c.getElementsByClassName("xmarks-rating",null,k.parentNode).length>0;var f=k.getElementsByTagName("cite");if(f.length>0){m=f[0].textContent}o=parseInt(k.getAttribute("xmarks_pos"));if(o>=100){o=o-100;l="top"}g=k.getAttribute("xmarks_boost");if(g){p=k.getAttribute("xmarks_boost")}}var n=document.createElement("img");var s="unknown";if(g){s="serp.ads.boost.click"+p}else{s="serp.adlink."+((!r&&!j)?"nonedecorated":((u||t)?"decorated":"notdecorated"))}n.src="".concat("http://",c.getTRHost(g),c.TRPING,"?page=",s,c._trParams(),"&domain=",m,"&pos=",o,"&block=",l,"&any_rating=",r?"1":"0","&any_shmear=",j?"1":"0","&rating=",u?"1":"0","&shmear=",t?"1":"0");k.appendChild(n)},true)}}},_mpData:[],addMegaPing:function(a){if(this.MP){this._mpData.push("&ping=",encodeURIComponent(a))}},sendMegaPing:function(){var a=new Image();a.src="".concat("http://",this.getTRHost(),this.TRPING,"?page=","serp.siteratings.ack",this._trParams(),this._mpData.join(""));this._mpData=[]},setPrefs:function(b){var a=document.createEvent("Event");if(a){window.XmarksPrefs=b;this.SERPPREFS=b;a.initEvent("xmarks_saveprefs",true,false);document.body.dispatchEvent(a)}}};window.setTimeout(function(){window.XmarksSERP.init()},(window.XmarksSERP._getInternetExplorerVersion()==-1?0:800))};